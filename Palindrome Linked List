public class Solution{
	public boolean isPalindrome(ListNode head){
		if(head == null || head.next == null)
			return true;
		ListNode p1 = head;
		ListNode p2 = head;
		while(p1.next != null && p1.next.next != null){
			p1 = p1.next.next;
			p2 = p2.next;
		}
		p2.next = reverse(p2.next);
		p1 = head;
		while(p2.next != null){
			p2 = p2.next;
			if(p1.val != p2.val)
				return false;
			p1 = p1.next;
		}
		return true;
		
			
	}
	ListNode reverse(ListNode head){
		ListNode pre = null;
		ListNode next = null;
		ListNode node = head;
		while(node != null){
			next = node.next;
			node.next = pre;
			pre = node;
			node = next;
		}
		return pre;
	}
}
